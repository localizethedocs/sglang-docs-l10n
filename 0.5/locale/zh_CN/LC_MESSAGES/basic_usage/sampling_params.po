# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2023-2025, SGLang
# This file is distributed under the same license as the SGLang package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: SGLang 0.5\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-11-09 18:38+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../basic_usage/sampling_params.md:1
msgid "Sampling Parameters"
msgstr ""

#: ../../../basic_usage/sampling_params.md:3
msgid ""
"This doc describes the sampling parameters of the SGLang Runtime. It is the "
"low-level endpoint of the runtime. If you want a high-level endpoint that "
"can automatically handle chat templates, consider using the [OpenAI "
"Compatible API](openai_api_completions.ipynb)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:6
msgid "`/generate` Endpoint"
msgstr ""

#: ../../../basic_usage/sampling_params.md:8
msgid ""
"The `/generate` endpoint accepts the following parameters in JSON format. "
"For detailed usage, see the [native API doc](native_api.ipynb). The object "
"is defined at `io_struct.py::GenerateReqInput`. You can also read the source "
"code to find more arguments and docs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Argument"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Type/Default"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Description"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "text"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[str], str]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The input prompt. Can be a single prompt or a batch of prompts."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "input_ids"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[List[int]], List[int]]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The token IDs for text; one can specify either text or input_ids."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "input_embeds"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[List[List[float]]], List[List[float]]]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"The embeddings for input_ids; one can specify either text, input_ids, or "
"input_embeds."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "image_data"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"`Optional[Union[List[List[ImageDataItem]], List[ImageDataItem], "
"ImageDataItem]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"The image input. Can be an image instance, file name, URL, or base64 encoded "
"string. Can be a single image, list of images, or list of lists of images."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "audio_data"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[AudioDataItem], AudioDataItem]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The audio input. Can be a file name, URL, or base64 encoded string."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "sampling_params"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[Dict], Dict]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The sampling parameters as described in the sections below."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "rid"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The request ID."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "return_logprob"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[bool], bool]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Whether to return log probabilities for tokens."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "logprob_start_len"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[int], int]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"If return_logprob, the start location in the prompt for returning logprobs. "
"Default is \"-1\", which returns logprobs for output tokens only."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "top_logprobs_num"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"If return_logprob, the number of top logprobs to return at each position."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "token_ids_logprob"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "If return_logprob, the token IDs to return logprob for."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "return_text_in_logprobs"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`bool = False`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Whether to detokenize tokens in text in the returned logprobs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "stream"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Whether to stream output."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "lora_path"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[Optional[str]], Optional[str]]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The path to the LoRA."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "custom_logit_processor"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[List[Optional[str]], str]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Custom logit processor for advanced sampling control. Must be a serialized "
"instance of `CustomLogitProcessor` using its `to_str()` method. For usage "
"see below."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "return_hidden_states"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Union[List[bool], bool] = False`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Whether to return hidden states."
msgstr ""

#: ../../../basic_usage/sampling_params.md:29
msgid "Sampling parameters"
msgstr ""

#: ../../../basic_usage/sampling_params.md:31
msgid ""
"The object is defined at `sampling_params.py::SamplingParams`. You can also "
"read the source code to find more arguments and docs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:33
msgid "Note on defaults"
msgstr ""

#: ../../../basic_usage/sampling_params.md:35
msgid ""
"By default, SGLang initializes several sampling parameters from the model's "
"`generation_config.json` (when the server is launched with `--sampling-"
"defaults model`, which is the default). To use SGLang/OpenAI constant "
"defaults instead, start the server with `--sampling-defaults openai`. You "
"can always override any parameter per request via `sampling_params`."
msgstr ""

#: ../../../basic_usage/sampling_params.md:37
msgid ""
"# Use model-provided defaults from generation_config.json (default "
"behavior)\n"
"python -m sglang.launch_server --model-path <MODEL> --sampling-defaults "
"model\n"
"\n"
"# Use SGLang/OpenAI constant defaults instead\n"
"python -m sglang.launch_server --model-path <MODEL> --sampling-defaults "
"openai\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:45
msgid "Core parameters"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "max_new_tokens"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`int = 128`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The maximum output length measured in tokens."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "stop"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[Union[str, List[str]]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"One or multiple [stop words](https://platform.openai.com/docs/api-reference/"
"chat/create#chat-create-stop). Generation will stop if one of these words is "
"sampled."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "stop_token_ids"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[List[int]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Provide stop words in the form of token IDs. Generation will stop if one of "
"these token IDs is sampled."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "stop_regex"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Stop when hitting any of the regex patterns in this list"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "temperature"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`float (model default; fallback 1.0)`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"[Temperature](https://platform.openai.com/docs/api-reference/chat/"
"create#chat-create-temperature) when sampling the next token. `temperature = "
"0` corresponds to greedy sampling, a higher temperature leads to more "
"diversity."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "top_p"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"[Top-p](https://platform.openai.com/docs/api-reference/chat/create#chat-"
"create-top_p) selects tokens from the smallest sorted set whose cumulative "
"probability exceeds `top_p`. When `top_p = 1`, this reduces to unrestricted "
"sampling from all tokens."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "top_k"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`int (model default; fallback -1)`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"[Top-k](https://developer.nvidia.com/blog/how-to-get-better-outputs-from-"
"your-large-language-model/#predictability_vs_creativity) randomly selects "
"from the `k` highest-probability tokens."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "min_p"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`float (model default; fallback 0.0)`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"[Min-p](https://github.com/huggingface/transformers/issues/27670) samples "
"from tokens with probability larger than `min_p * highest_token_probability`."
msgstr ""

#: ../../../basic_usage/sampling_params.md:58
msgid "Penalizers"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "frequency_penalty"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`float = 0.0`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Penalizes tokens based on their frequency in generation so far. Must be "
"between `-2` and `2` where negative numbers encourage repeatment of tokens "
"and positive number encourages sampling of new tokens. The scaling of "
"penalization grows linearly with each appearance of a token."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "presence_penalty"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Penalizes tokens if they appeared in the generation so far. Must be between "
"`-2` and `2` where negative numbers encourage repeatment of tokens and "
"positive number encourages sampling of new tokens. The scaling of the "
"penalization is constant if a token occurred."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "min_new_tokens"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`int = 0`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Forces the model to generate at least `min_new_tokens` until a stop word or "
"EOS token is sampled. Note that this might lead to unintended behavior, for "
"example, if the distribution is highly skewed towards these tokens."
msgstr ""

#: ../../../basic_usage/sampling_params.md:66
msgid "Constrained decoding"
msgstr ""

#: ../../../basic_usage/sampling_params.md:68
msgid ""
"Please refer to our dedicated guide on [constrained decoding](../"
"advanced_features/structured_outputs.ipynb) for the following parameters."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "json_schema"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[str] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "JSON schema for structured outputs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "regex"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Regex for structured outputs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "ebnf"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "EBNF for structured outputs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "structural_tag"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "The structal tag for structured outputs."
msgstr ""

#: ../../../basic_usage/sampling_params.md:77
msgid "Other options"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`int = 1`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Specifies the number of output sequences to generate per request. "
"(Generating multiple outputs in one request (n > 1) is discouraged; "
"repeating the same prompts several times offers better control and "
"efficiency.)"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "ignore_eos"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Don't stop generation when EOS token is sampled."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "skip_special_tokens"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`bool = True`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Remove special tokens during decoding."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "spaces_between_special_tokens"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid ""
"Whether or not to add spaces between special tokens during detokenization."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "no_stop_trim"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Don't trim stop words or EOS token from the generated text."
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "custom_params"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "`Optional[List[Optional[Dict[str, Any]]]] = None`"
msgstr ""

#: ../../../basic_usage/sampling_params.md:0
msgid "Used when employing `CustomLogitProcessor`. For usage, see below."
msgstr ""

#: ../../../basic_usage/sampling_params.md:88
msgid "Examples"
msgstr ""

#: ../../../basic_usage/sampling_params.md:90
msgid "Normal"
msgstr ""

#: ../../../basic_usage/sampling_params.md:92
#: ../../../basic_usage/sampling_params.md:155
msgid "Launch a server:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:94
msgid ""
"python -m sglang.launch_server --model-path meta-llama/Meta-Llama-3-8B-"
"Instruct --port 30000\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:98
#: ../../../basic_usage/sampling_params.md:167
#: ../../../basic_usage/sampling_params.md:303
msgid "Send a request:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:100
msgid ""
"import requests\n"
"\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"The capital of France is\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 32,\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:116
msgid "Detailed example in [send request](./send_request.ipynb)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:118
msgid "Streaming"
msgstr ""

#: ../../../basic_usage/sampling_params.md:120
msgid "Send a request and stream the output:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:122
msgid ""
"import requests, json\n"
"\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"The capital of France is\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 32,\n"
"        },\n"
"        \"stream\": True,\n"
"    },\n"
"    stream=True,\n"
")\n"
"\n"
"prev = 0\n"
"for chunk in response.iter_lines(decode_unicode=False):\n"
"    chunk = chunk.decode(\"utf-8\")\n"
"    if chunk and chunk.startswith(\"data:\"):\n"
"        if chunk == \"data: [DONE]\":\n"
"            break\n"
"        data = json.loads(chunk[5:].strip(\"\\n\"))\n"
"        output = data[\"text\"].strip()\n"
"        print(output[prev:], end=\"\", flush=True)\n"
"        prev = len(output)\n"
"print(\"\")\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:151
msgid ""
"Detailed example in [openai compatible api](openai_api_completions.ipynb)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:153
msgid "Multimodal"
msgstr ""

#: ../../../basic_usage/sampling_params.md:157
msgid ""
"python3 -m sglang.launch_server --model-path lmms-lab/llava-onevision-"
"qwen2-7b-ov\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:161
msgid "Download an image:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:163
msgid ""
"curl -o example_image.png -L https://github.com/sgl-project/sglang/blob/main/"
"test/lang/example_image.png?raw=true\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:169
msgid ""
"import requests\n"
"\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"<|im_start|>system\\nYou are a helpful assistant.<|"
"im_end|>\\n\"\n"
"                \"<|im_start|>user\\n<image>\\nDescribe this image in a very "
"short sentence.<|im_end|>\\n\"\n"
"                \"<|im_start|>assistant\\n\",\n"
"        \"image_data\": \"example_image.png\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 32,\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:188
msgid ""
"The `image_data` can be a file name, a URL, or a base64 encoded string. See "
"also `python/sglang/srt/utils.py:load_image`."
msgstr ""

#: ../../../basic_usage/sampling_params.md:190
msgid "Streaming is supported in a similar manner as [above](#streaming)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:192
msgid "Detailed example in [OpenAI API Vision](openai_api_vision.ipynb)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:194
msgid "Structured Outputs (JSON, Regex, EBNF)"
msgstr ""

#: ../../../basic_usage/sampling_params.md:196
msgid ""
"You can specify a JSON schema, regular expression or [EBNF](https://en."
"wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form) to constrain the model "
"output. The model output will be guaranteed to follow the given constraints. "
"Only one constraint parameter (`json_schema`, `regex`, or `ebnf`) can be "
"specified for a request."
msgstr ""

#: ../../../basic_usage/sampling_params.md:198
msgid "SGLang supports two grammar backends:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:200
msgid ""
"[XGrammar](https://github.com/mlc-ai/xgrammar) (default): Supports JSON "
"schema, regular expression, and EBNF constraints."
msgstr ""

#: ../../../basic_usage/sampling_params.md:201
msgid ""
"XGrammar currently uses the [GGML BNF format](https://github.com/ggerganov/"
"llama.cpp/blob/master/grammars/README.md)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:202
msgid ""
"[Outlines](https://github.com/dottxt-ai/outlines): Supports JSON schema and "
"regular expression constraints."
msgstr ""

#: ../../../basic_usage/sampling_params.md:204
msgid ""
"If instead you want to initialize the Outlines backend, you can use `--"
"grammar-backend outlines` flag:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:206
msgid ""
"python -m sglang.launch_server --model-path meta-llama/Meta-Llama-3.1-8B-"
"Instruct \\\n"
"--port 30000 --host 0.0.0.0 --grammar-backend [xgrammar|outlines] # xgrammar "
"or outlines (default: xgrammar)\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:211
msgid ""
"import json\n"
"import requests\n"
"\n"
"json_schema = json.dumps({\n"
"    \"type\": \"object\",\n"
"    \"properties\": {\n"
"        \"name\": {\"type\": \"string\", \"pattern\": \"^[\\\\w]+$\"},\n"
"        \"population\": {\"type\": \"integer\"},\n"
"    },\n"
"    \"required\": [\"name\", \"population\"],\n"
"})\n"
"\n"
"# JSON (works with both Outlines and XGrammar)\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"Here is the information of the capital of France in the "
"JSON format.\\n\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 64,\n"
"            \"json_schema\": json_schema,\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
"\n"
"# Regular expression (Outlines backend only)\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"Paris is the capital of\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 64,\n"
"            \"regex\": \"(France|England)\",\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
"\n"
"# EBNF (XGrammar backend only)\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"Write a greeting.\",\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0,\n"
"            \"max_new_tokens\": 64,\n"
"            \"ebnf\": 'root ::= \"Hello\" | \"Hi\" | \"Hey\"',\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:267
msgid ""
"Detailed example in [structured outputs](../advanced_features/"
"structured_outputs.ipynb)."
msgstr ""

#: ../../../basic_usage/sampling_params.md:269
msgid "Custom logit processor"
msgstr ""

#: ../../../basic_usage/sampling_params.md:271
msgid "Launch a server with `--enable-custom-logit-processor` flag on."
msgstr ""

#: ../../../basic_usage/sampling_params.md:273
msgid ""
"python -m sglang.launch_server \\\n"
"  --model-path meta-llama/Meta-Llama-3-8B-Instruct \\\n"
"  --port 30000 \\\n"
"  --enable-custom-logit-processor\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:280
msgid ""
"Define a custom logit processor that will always sample a specific token id."
msgstr ""

#: ../../../basic_usage/sampling_params.md:282
msgid ""
"from sglang.srt.sampling.custom_logit_processor import CustomLogitProcessor\n"
"\n"
"class DeterministicLogitProcessor(CustomLogitProcessor):\n"
"    \"\"\"A dummy logit processor that changes the logits to always\n"
"    sample the given token id.\n"
"    \"\"\"\n"
"\n"
"    def __call__(self, logits, custom_param_list):\n"
"        # Check that the number of logits matches the number of custom "
"parameters\n"
"        assert logits.shape[0] == len(custom_param_list)\n"
"        key = \"token_id\"\n"
"\n"
"        for i, param_dict in enumerate(custom_param_list):\n"
"            # Mask all other tokens\n"
"            logits[i, :] = -float(\"inf\")\n"
"            # Assign highest probability to the specified token\n"
"            logits[i, param_dict[key]] = 0.0\n"
"        return logits\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:305
msgid ""
"import requests\n"
"\n"
"response = requests.post(\n"
"    \"http://localhost:30000/generate\",\n"
"    json={\n"
"        \"text\": \"The capital of France is\",\n"
"        \"custom_logit_processor\": DeterministicLogitProcessor().to_str(),\n"
"        \"sampling_params\": {\n"
"            \"temperature\": 0.0,\n"
"            \"max_new_tokens\": 32,\n"
"            \"custom_params\": {\"token_id\": 5},\n"
"        },\n"
"    },\n"
")\n"
"print(response.json())\n"
msgstr ""

#: ../../../basic_usage/sampling_params.md:323
msgid "Send an OpenAI chat completion request:"
msgstr ""

#: ../../../basic_usage/sampling_params.md:325
msgid ""
"import openai\n"
"from sglang.utils import print_highlight\n"
"\n"
"client = openai.Client(base_url=\"http://127.0.0.1:30000/v1\", "
"api_key=\"None\")\n"
"\n"
"response = client.chat.completions.create(\n"
"    model=\"meta-llama/Meta-Llama-3-8B-Instruct\",\n"
"    messages=[\n"
"        {\"role\": \"user\", \"content\": \"List 3 countries and their "
"capitals.\"},\n"
"    ],\n"
"    temperature=0.0,\n"
"    max_tokens=32,\n"
"    extra_body={\n"
"        \"custom_logit_processor\": DeterministicLogitProcessor().to_str(),\n"
"        \"custom_params\": {\"token_id\": 5},\n"
"    },\n"
")\n"
"\n"
"print_highlight(f\"Response: {response}\")\n"
msgstr ""
