# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2023-2026, SGLang
# This file is distributed under the same license as the SGLang package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: SGLang stable\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2026-02-10 09:00+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../platforms/ascend_npu_best_practice.md:1
msgid "Best Practice on Ascend NPU"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:3
msgid ""
"This section describes the best practice data of mainstream LLM models such "
"as DeepSeek and Qwen on the Ascend Npu. If you encounter issues or have any "
"questions, please [open an issue](https://github.com/sgl-project/sglang/"
"issues)."
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:6
msgid "DeepSeek Series Models"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:8
#: ../../../platforms/ascend_npu_best_practice.md:30
msgid "Low Latency"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Model"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Hardware"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "CardNum"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Deploy Mode"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Dataset"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Quantization"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Configuration"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Deepseek-R1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Atlas 800I A3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "32"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "PD Separation"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "6K-1.6K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "W8A8"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-low-latency-20ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "3.9K-1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-low-latency-20ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "3.5K-1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-low-latency-20ms-3)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "3.5K-1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-low-latency-20ms-4)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Deepseek-V3.2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "64K-3K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-v32-low-latency-30ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:18
#: ../../../platforms/ascend_npu_best_practice.md:41
msgid "High Throughput"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-high-performance-50ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "8"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "PD Mixed"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "2K-2K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "W4A8"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-high-performance-50ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "16"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-high-performance-50ms-3)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-high-performance-50ms-4)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#deepseek-r1-high-performance-50ms-5)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:28
msgid "Qwen Series Models"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Qwen3-235B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "11K-1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "BF16"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-235b-low-latency-10ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Qwen3-32B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "4"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "6K-1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-low-latency-18ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "4K-1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-low-latency-11ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "18K-4K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-low-latency-12ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Atlas 800I A2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-a2-low-latency-18ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-a2-low-latency-11ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "24"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-235b-high-throughput-50ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-235b-high-throughput-50ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-235b-high-throughput-50ms-3)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-235b-high-throughput-50ms-4)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-high-throughput-50ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-high-throughput-50ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Qwen3-30B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-high-throughput-50ms-3)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Qwen3-480B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-480b-high-throughput-50ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-480b-high-throughput-50ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-480b-high-throughput-50ms-3)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "Qwen3-Next"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-next-high-throughput-50ms)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-a2-high-throughput-50ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:0
msgid "[Optimal Configuration](#qwen3-32b-a2-high-throughput-50ms-2)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:59
msgid "Optimal Configuration"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:61
msgid "DeepSeek R1 High Performance 50ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:63
#: ../../../platforms/ascend_npu_best_practice.md:178
#: ../../../platforms/ascend_npu_best_practice.md:291
#: ../../../platforms/ascend_npu_best_practice.md:313
#: ../../../platforms/ascend_npu_best_practice.md:335
#: ../../../platforms/ascend_npu_best_practice.md:357
#: ../../../platforms/ascend_npu_best_practice.md:433
#: ../../../platforms/ascend_npu_best_practice.md:554
#: ../../../platforms/ascend_npu_best_practice.md:627
msgid "Model: Deepseek R1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:65
#: ../../../platforms/ascend_npu_best_practice.md:180
#: ../../../platforms/ascend_npu_best_practice.md:293
#: ../../../platforms/ascend_npu_best_practice.md:315
#: ../../../platforms/ascend_npu_best_practice.md:337
#: ../../../platforms/ascend_npu_best_practice.md:749
msgid "Hardware: Atlas 800I A3 32Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:67
#: ../../../platforms/ascend_npu_best_practice.md:182
#: ../../../platforms/ascend_npu_best_practice.md:295
#: ../../../platforms/ascend_npu_best_practice.md:317
#: ../../../platforms/ascend_npu_best_practice.md:339
#: ../../../platforms/ascend_npu_best_practice.md:437
#: ../../../platforms/ascend_npu_best_practice.md:631
#: ../../../platforms/ascend_npu_best_practice.md:751
#: ../../../platforms/ascend_npu_best_practice.md:959
#: ../../../platforms/ascend_npu_best_practice.md:1848
msgid "DeployMode: PD Separation"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:69
#: ../../../platforms/ascend_npu_best_practice.md:319
#: ../../../platforms/ascend_npu_best_practice.md:560
#: ../../../platforms/ascend_npu_best_practice.md:633
#: ../../../platforms/ascend_npu_best_practice.md:961
#: ../../../platforms/ascend_npu_best_practice.md:1093
#: ../../../platforms/ascend_npu_best_practice.md:1648
#: ../../../platforms/ascend_npu_best_practice.md:1784
#: ../../../platforms/ascend_npu_best_practice.md:1850
#: ../../../platforms/ascend_npu_best_practice.md:1970
#: ../../../platforms/ascend_npu_best_practice.md:2049
#: ../../../platforms/ascend_npu_best_practice.md:2113
#: ../../../platforms/ascend_npu_best_practice.md:2314
msgid "DataSets: 3.5K1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:71
#: ../../../platforms/ascend_npu_best_practice.md:365
#: ../../../platforms/ascend_npu_best_practice.md:441
#: ../../../platforms/ascend_npu_best_practice.md:562
#: ../../../platforms/ascend_npu_best_practice.md:635
#: ../../../platforms/ascend_npu_best_practice.md:963
#: ../../../platforms/ascend_npu_best_practice.md:1095
#: ../../../platforms/ascend_npu_best_practice.md:1232
#: ../../../platforms/ascend_npu_best_practice.md:1300
#: ../../../platforms/ascend_npu_best_practice.md:1650
#: ../../../platforms/ascend_npu_best_practice.md:1718
#: ../../../platforms/ascend_npu_best_practice.md:1786
#: ../../../platforms/ascend_npu_best_practice.md:1852
#: ../../../platforms/ascend_npu_best_practice.md:1972
#: ../../../platforms/ascend_npu_best_practice.md:2051
#: ../../../platforms/ascend_npu_best_practice.md:2115
#: ../../../platforms/ascend_npu_best_practice.md:2316
#: ../../../platforms/ascend_npu_best_practice.md:2384
msgid "TPOT: 50ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:73
#: ../../../platforms/ascend_npu_best_practice.md:188
#: ../../../platforms/ascend_npu_best_practice.md:301
#: ../../../platforms/ascend_npu_best_practice.md:323
#: ../../../platforms/ascend_npu_best_practice.md:345
#: ../../../platforms/ascend_npu_best_practice.md:367
#: ../../../platforms/ascend_npu_best_practice.md:443
#: ../../../platforms/ascend_npu_best_practice.md:564
#: ../../../platforms/ascend_npu_best_practice.md:637
#: ../../../platforms/ascend_npu_best_practice.md:757
#: ../../../platforms/ascend_npu_best_practice.md:965
#: ../../../platforms/ascend_npu_best_practice.md:1097
#: ../../../platforms/ascend_npu_best_practice.md:1166
#: ../../../platforms/ascend_npu_best_practice.md:1234
#: ../../../platforms/ascend_npu_best_practice.md:1302
#: ../../../platforms/ascend_npu_best_practice.md:1383
#: ../../../platforms/ascend_npu_best_practice.md:1452
#: ../../../platforms/ascend_npu_best_practice.md:1521
#: ../../../platforms/ascend_npu_best_practice.md:1587
#: ../../../platforms/ascend_npu_best_practice.md:1652
#: ../../../platforms/ascend_npu_best_practice.md:1720
#: ../../../platforms/ascend_npu_best_practice.md:1788
#: ../../../platforms/ascend_npu_best_practice.md:1854
#: ../../../platforms/ascend_npu_best_practice.md:1974
#: ../../../platforms/ascend_npu_best_practice.md:2053
#: ../../../platforms/ascend_npu_best_practice.md:2117
#: ../../../platforms/ascend_npu_best_practice.md:2182
#: ../../../platforms/ascend_npu_best_practice.md:2249
#: ../../../platforms/ascend_npu_best_practice.md:2318
#: ../../../platforms/ascend_npu_best_practice.md:2386
msgid "Model Deployment"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:75
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"\n"
"export ASCEND_MF_STORE_URL=\"tcp://your prefill ip1:24669\"\n"
"\n"
"P_IP=('your prefill ip1' 'your prefill ip2')\n"
"\n"
"D_IP=('your decode ip1' 'your decode ip2')\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"# prefill\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        export HCCL_BUFFSIZE=1536\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"        export TASK_QUEUE_ENABLE=2\n"
"\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH}  --"
"disaggregation-mode prefill --host ${P_IP[$i]} \\\n"
"        --port 8000 --disaggregation-bootstrap-port $((8998+$i)) --trust-"
"remote-code --nnodes 1 --node-rank 0 \\\n"
"        --tp-size 16 --mem-fraction-static 0.81 --attention-backend ascend --"
"device npu --quantization modelslim \\\n"
"        --disaggregation-transfer-backend ascend --max-running-requests 8 --"
"context-length 8192  --disable-radix-cache \\\n"
"        --chunked-prefill-size -1 --max-prefill-tokens 28680 --moe-a2a-"
"backend deepep --deepep-mode normal \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 1 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 2  \\\n"
"        --dp-size 2 --enable-dp-attention --disable-shared-experts-fusion --"
"dtype bfloat16 --enable-attn-tp-input-scattered\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"# decode\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"        export SGLANG_ENABLE_SPEC_V2=1\n"
"        export HCCL_BUFFSIZE=650\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=78\n"
"        export TASK_QUEUE_ENABLE=1\n"
"        export SGLANG_SCHEDULER_SKIP_ALL_GATHER=1\n"
"        export HCCL_SOCKET_IFNAME=xxx\n"
"        export GLOO_SOCKET_IFNAME=xxx\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode --host ${D_IP[$i]} \\\n"
"        --port 8001 --trust-remote-code --dist-init-addr ${D_IP[0]}:5000 --"
"nnodes 2 --node-rank $i --tp-size 32 --dp-size 32 \\\n"
"        --mem-fraction-static 0.815 --max-running-requests 832 --attention-"
"backend ascend --device npu --quantization modelslim \\\n"
"        --moe-a2a-backend deepep --enable-dp-attention --deepep-mode "
"low_latency --enable-dp-lm-head --moe-dense-tp 1 \\\n"
"        --cuda-graph-bs 12 14 16 18 20 22 24 26 --disaggregation-transfer-"
"backend ascend --watchdog-timeout 9000 --context-length 8192 \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 2 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 3  \\\n"
"        --tokenizer-worker-num 4 --prefill-round-robin-balance --disable-"
"shared-experts-fusion --dtype bfloat16 \\\n"
"        --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:157
#: ../../../platforms/ascend_npu_best_practice.md:270
msgid ""
"export SGLANG_DP_ROUND_ROBIN=1\n"
"python -m sglang_router.launch_router \\\n"
"    --pd-disaggregation \\\n"
"    --policy cache_aware \\\n"
"    --prefill http://P_IP:8000 8998 \\\n"
"    --prefill http://P_IP:8000 8999 \\\n"
"    --decode http://D_IP:8001 \\\n"
"    --host 127.0.0.1 \\\n"
"    --port 6688 \\\n"
"    --mini-lb\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:170
#: ../../../platforms/ascend_npu_best_practice.md:283
#: ../../../platforms/ascend_npu_best_practice.md:305
#: ../../../platforms/ascend_npu_best_practice.md:327
#: ../../../platforms/ascend_npu_best_practice.md:349
#: ../../../platforms/ascend_npu_best_practice.md:425
#: ../../../platforms/ascend_npu_best_practice.md:546
#: ../../../platforms/ascend_npu_best_practice.md:619
#: ../../../platforms/ascend_npu_best_practice.md:739
#: ../../../platforms/ascend_npu_best_practice.md:947
#: ../../../platforms/ascend_npu_best_practice.md:1079
#: ../../../platforms/ascend_npu_best_practice.md:1148
#: ../../../platforms/ascend_npu_best_practice.md:1216
#: ../../../platforms/ascend_npu_best_practice.md:1284
#: ../../../platforms/ascend_npu_best_practice.md:1365
#: ../../../platforms/ascend_npu_best_practice.md:1434
#: ../../../platforms/ascend_npu_best_practice.md:1501
#: ../../../platforms/ascend_npu_best_practice.md:1569
#: ../../../platforms/ascend_npu_best_practice.md:1634
#: ../../../platforms/ascend_npu_best_practice.md:1700
#: ../../../platforms/ascend_npu_best_practice.md:1768
#: ../../../platforms/ascend_npu_best_practice.md:1836
#: ../../../platforms/ascend_npu_best_practice.md:1956
#: ../../../platforms/ascend_npu_best_practice.md:2035
#: ../../../platforms/ascend_npu_best_practice.md:2099
#: ../../../platforms/ascend_npu_best_practice.md:2164
#: ../../../platforms/ascend_npu_best_practice.md:2229
#: ../../../platforms/ascend_npu_best_practice.md:2300
#: ../../../platforms/ascend_npu_best_practice.md:2366
#: ../../../platforms/ascend_npu_best_practice.md:2434
msgid "Benchmark"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:172
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 768  --random-input-len 3500 --"
"random-output-len 1500 --num-prompts 3072 --random-range-ratio 1 --request-"
"rate 16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:176
msgid "DeepSeek R1 Low Latency 20ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:184
msgid "DataSets: 6K1.6K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:186
#: ../../../platforms/ascend_npu_best_practice.md:299
#: ../../../platforms/ascend_npu_best_practice.md:321
#: ../../../platforms/ascend_npu_best_practice.md:343
msgid "TPOT: 20ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:190
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"export ASCEND_MF_STORE_URL=\"tcp://your prefill ip1:24669\"\n"
"\n"
"P_IP=('your prefill ip1' 'your prefill ip2')\n"
"\n"
"D_IP=('your decode ip1' 'your decode ip2')\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"# prefill\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        export HCCL_BUFFSIZE=1536\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"        export TASK_QUEUE_ENABLE=2\n"
"\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH}  --"
"disaggregation-mode prefill --host ${P_IP[$i]} \\\n"
"        --port 8000 --disaggregation-bootstrap-port $((8998+$i)) --trust-"
"remote-code --nnodes 1 --node-rank 0 \\\n"
"        --tp-size 16 --mem-fraction-static 0.81 --attention-backend ascend --"
"device npu --quantization modelslim \\\n"
"        --disaggregation-transfer-backend ascend --max-running-requests 4 --"
"context-length 8192  --disable-radix-cache \\\n"
"        --chunked-prefill-size -1 --max-prefill-tokens 28680 --moe-a2a-"
"backend deepep --deepep-mode normal \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 1 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 2  \\\n"
"        --dp-size 2 --enable-dp-attention --disable-shared-experts-fusion --"
"dtype bfloat16 --enable-attn-tp-input-scattered\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"# decode\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"        export SGLANG_ENABLE_SPEC_V2=1\n"
"        export HCCL_BUFFSIZE=650\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=12\n"
"        export TASK_QUEUE_ENABLE=1\n"
"        export SGLANG_SCHEDULER_SKIP_ALL_GATHER=1\n"
"        export HCCL_SOCKET_IFNAME=xxx\n"
"        export GLOO_SOCKET_IFNAME=xxx\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode --host ${D_IP[$i]} \\\n"
"        --port 8001 --trust-remote-code --dist-init-addr DIP1:5000 --nnodes "
"2 --node-rank $i --tp-size 32 --dp-size 16 \\\n"
"        --mem-fraction-static 0.75 --max-running-requests 32 --attention-"
"backend ascend --device npu --quantization modelslim \\\n"
"        --moe-a2a-backend deepep --enable-dp-attention --deepep-mode "
"low_latency --enable-dp-lm-head --moe-dense-tp 1 \\\n"
"        --cuda-graph-bs 2 4 6 --disaggregation-transfer-backend ascend --"
"watchdog-timeout 9000 --context-length 8192 \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 3 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 4  \\\n"
"        --tokenizer-worker-num 4 --prefill-round-robin-balance --disable-"
"shared-experts-fusion --dtype bfloat16 \\\n"
"        --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:285
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 32  --random-input-len 6000 --random-"
"output-len 1600 --num-prompts 32 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:289
msgid "DeepSeek R1 Low Latency 20ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:297
msgid "DataSets: 3.9K1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:303
#: ../../../platforms/ascend_npu_best_practice.md:325
#: ../../../platforms/ascend_npu_best_practice.md:347
msgid ""
"Please Turn to [DeepSeek R1 Low Latency 20ms](#deepSeek-r1-low-"
"latency-20ms-1)"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:307
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 768  --random-input-len 3900 --"
"random-output-len 1000 --num-prompts 768 --random-range-ratio 1 --request-"
"rate 16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:311
msgid "DeepSeek R1 Low Latency 20ms 3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:329
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 768  --random-input-len 3500 --"
"random-output-len 1500 --num-prompts 768 --random-range-ratio 1 --request-"
"rate 16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:333
msgid "DeepSeek R1 Low Latency 20ms 4"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:341
msgid "DataSets: 3.5K1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:351
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 768  --random-input-len 3500 --"
"random-output-len 1000 --num-prompts 768 --random-range-ratio 1 --request-"
"rate 16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:355
msgid "DeepSeek R1 High Performance 50ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:359
#: ../../../platforms/ascend_npu_best_practice.md:556
#: ../../../platforms/ascend_npu_best_practice.md:1089
#: ../../../platforms/ascend_npu_best_practice.md:1158
#: ../../../platforms/ascend_npu_best_practice.md:1226
#: ../../../platforms/ascend_npu_best_practice.md:1375
#: ../../../platforms/ascend_npu_best_practice.md:1579
#: ../../../platforms/ascend_npu_best_practice.md:2045
msgid "Hardware: Atlas 800I A3 8Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:361
#: ../../../platforms/ascend_npu_best_practice.md:558
#: ../../../platforms/ascend_npu_best_practice.md:1091
#: ../../../platforms/ascend_npu_best_practice.md:1160
#: ../../../platforms/ascend_npu_best_practice.md:1228
#: ../../../platforms/ascend_npu_best_practice.md:1296
#: ../../../platforms/ascend_npu_best_practice.md:1377
#: ../../../platforms/ascend_npu_best_practice.md:1446
#: ../../../platforms/ascend_npu_best_practice.md:1515
#: ../../../platforms/ascend_npu_best_practice.md:1581
#: ../../../platforms/ascend_npu_best_practice.md:1646
#: ../../../platforms/ascend_npu_best_practice.md:1714
#: ../../../platforms/ascend_npu_best_practice.md:1782
#: ../../../platforms/ascend_npu_best_practice.md:1968
#: ../../../platforms/ascend_npu_best_practice.md:2047
#: ../../../platforms/ascend_npu_best_practice.md:2111
#: ../../../platforms/ascend_npu_best_practice.md:2176
#: ../../../platforms/ascend_npu_best_practice.md:2243
#: ../../../platforms/ascend_npu_best_practice.md:2312
#: ../../../platforms/ascend_npu_best_practice.md:2380
msgid "DeployMode: PD Mixed"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:363
#: ../../../platforms/ascend_npu_best_practice.md:439
#: ../../../platforms/ascend_npu_best_practice.md:1162
#: ../../../platforms/ascend_npu_best_practice.md:1230
#: ../../../platforms/ascend_npu_best_practice.md:1298
#: ../../../platforms/ascend_npu_best_practice.md:1716
#: ../../../platforms/ascend_npu_best_practice.md:2382
msgid "DataSets: 2K2K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:369
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"export SGLANG_SCHEDULER_DECREASE_PREFILL_IDLE=1\n"
"\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=64\n"
"export HCCL_BUFFSIZE=1600\n"
"export DEEPEP_NORMAL_LONG_SEQ_ROUND=10\n"
"export DEEPEP_NORMAL_LONG_SEQ_PER_ROUND_TOKENS=512\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"export ENABLE_MOE_NZ=1\n"
"\n"
"python3 -m sglang.launch_server --model-path ${MODEL_PATH} \\\n"
"--tp 16 \\\n"
"--trust-remote-code \\\n"
"--attention-backend ascend \\\n"
"--device npu \\\n"
"--quantization modelslim \\\n"
"--watchdog-timeout 9000 \\\n"
"--host 127.0.0.1 --port 6699 \\\n"
"--cuda-graph-bs 4 8 16 \\\n"
"--mem-fraction-static 0.74 \\\n"
"--max-running-requests 256 \\\n"
"--disable-radix-cache --chunked-prefill-size -1 --max-prefill-tokens 1500 "
"\\\n"
"--moe-a2a-backend deepep --deepep-mode auto \\\n"
"--enable-dp-attention --dp-size 16 --enable-dp-lm-head \\\n"
"--speculative-algorithm NEXTN --speculative-num-steps 3 --speculative-eagle-"
"topk 1 --speculative-num-draft-tokens 4 \\\n"
"--dtype bfloat16\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:427
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6699 --max-concurrency 256  --random-input-len 2048 --"
"random-output-len 2048 --num-prompts 1024 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:431
msgid "DeepSeek R1 High Performance 50ms 3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:435
#: ../../../platforms/ascend_npu_best_practice.md:629
#: ../../../platforms/ascend_npu_best_practice.md:1294
#: ../../../platforms/ascend_npu_best_practice.md:1966
msgid "Hardware: Atlas 800I A3 16Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:445
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"\n"
"export ASCEND_MF_STORE_URL=\"tcp://your prefill ip1:24667\"\n"
"\n"
"P_IP=('your prefill ip1')\n"
"\n"
"D_IP=('your decode ip1')\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"export ENABLE_MOE_NZ=1\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"# prefill\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        export HCCL_BUFFSIZE=1536\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"        export TASK_QUEUE_ENABLE=2\n"
"\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH}  --"
"disaggregation-mode prefill --host ${P_IP[$i]} \\\n"
"        --port 8000 --disaggregation-bootstrap-port $((8998+$i)) --trust-"
"remote-code --nnodes 1 --node-rank 0 \\\n"
"        --tp-size 16 --mem-fraction-static 0.6 --attention-backend ascend --"
"device npu --quantization modelslim \\\n"
"        --disaggregation-transfer-backend ascend --max-running-requests 8 --"
"context-length 8192  --disable-radix-cache \\\n"
"        --chunked-prefill-size 32768 --max-prefill-tokens 28680 --moe-a2a-"
"backend deepep --deepep-mode normal \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 1 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 2  \\\n"
"        --dp-size 2 --enable-dp-attention --disable-shared-experts-fusion --"
"dtype bfloat16\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"# decode\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"        export SGLANG_ENABLE_SPEC_V2=1\n"
"        export HCCL_BUFFSIZE=720\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=96\n"
"        export TASK_QUEUE_ENABLE=1\n"
"        export HCCL_SOCKET_IFNAME=xxx\n"
"        export GLOO_SOCKET_IFNAME=xxx\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode --host ${D_IP[$i]} \\\n"
"        --port 8001 --trust-remote-code --nnodes 1 --node-rank 0 --tp-size "
"16 --dp-size 16 \\\n"
"        --mem-fraction-static 0.8 --max-running-requests 384 --attention-"
"backend ascend --device npu --quantization modelslim \\\n"
"        --moe-a2a-backend deepep --enable-dp-attention --deepep-mode "
"low_latency --enable-dp-lm-head \\\n"
"        --cuda-graph-bs 8 10 12 14 16 18 20 22 24 --disaggregation-transfer-"
"backend ascend --watchdog-timeout 9000 --context-length 8192 \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 3 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 4  \\\n"
"        --prefill-round-robin-balance --disable-shared-experts-fusion --"
"dtype bfloat16 --tokenizer-worker-num 4 \\\n"
"\t\t    --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:534
#: ../../../platforms/ascend_npu_best_practice.md:727
msgid ""
"export SGLANG_DP_ROUND_ROBIN=1\n"
"python -m sglang_router.launch_router \\\n"
"    --pd-disaggregation \\\n"
"    --policy cache_aware \\\n"
"    --prefill http://P_IP:8000 8998 \\\n"
"    --decode http://D_IP:8001 \\\n"
"    --host 127.0.0.1 \\\n"
"    --port 6688 \\\n"
"    --mini-lb\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:548
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 400  --random-input-len 2048 --"
"random-output-len 2048 --num-prompts 3200 --random-range-ratio 1 --request-"
"rate 8\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:552
msgid "DeepSeek R1 High Performance 50ms 4"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:566
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"export STREAMS_PER_DEVICE=32\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export SGLANG_SCHEDULER_DECREASE_PREFILL_IDLE=1\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=36\n"
"export HCCL_BUFFSIZE=1600\n"
"export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"export ENABLE_MOE_NZ=1\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"python3 -m sglang.launch_server --model-path ${MODEL_PATH} \\\n"
"--tp 16 \\\n"
"--trust-remote-code \\\n"
"--attention-backend ascend \\\n"
"--device npu \\\n"
"--quantization modelslim \\\n"
"--watchdog-timeout 9000 \\\n"
"--host 127.0.0.1 --port 6699 \\\n"
"--cuda-graph-bs 8 16 24 28 32 36 \\\n"
"--mem-fraction-static 0.71 \\\n"
"--max-running-requests 144 \\\n"
"--context-length 8188  --disable-radix-cache --chunked-prefill-size -1 --max-"
"prefill-tokens 9000 \\\n"
"--moe-a2a-backend deepep --deepep-mode auto \\\n"
"--enable-dp-attention --dp-size 4 --enable-dp-lm-head \\\n"
"--speculative-algorithm NEXTN --speculative-num-steps 3 --speculative-eagle-"
"topk 1 --speculative-num-draft-tokens 4 \\\n"
"--dtype bfloat16\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:621
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6699 --max-concurrency 144  --random-input-len 3500 --"
"random-output-len 1500 --num-prompts 576 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:625
msgid "DeepSeek R1 High Performance 50ms 5"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:639
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"\n"
"export ASCEND_MF_STORE_URL=\"tcp://your prefill ip1:24667\"\n"
"\n"
"P_IP=('your prefill ip1')\n"
"\n"
"D_IP=('your decode ip1')\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export SGLANG_USE_FIA_NZ=1\n"
"export ENABLE_MOE_NZ=1\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"# prefill\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        export HCCL_BUFFSIZE=1536\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"        export TASK_QUEUE_ENABLE=2\n"
"\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH}  --"
"disaggregation-mode prefill --host ${P_IP[$i]} \\\n"
"        --port 8000 --disaggregation-bootstrap-port $((8998+$i)) --trust-"
"remote-code --nnodes 1 --node-rank 0 \\\n"
"        --tp-size 16 --mem-fraction-static 0.6 --attention-backend ascend --"
"device npu --quantization modelslim \\\n"
"        --disaggregation-transfer-backend ascend --max-running-requests 8 --"
"context-length 8192  --disable-radix-cache \\\n"
"        --chunked-prefill-size -1 --max-prefill-tokens 28680 --moe-a2a-"
"backend deepep --deepep-mode normal \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 1 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 2  \\\n"
"        --dp-size 2 --enable-dp-attention --disable-shared-experts-fusion --"
"dtype bfloat16\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"# decode\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"        export SGLANG_ENABLE_SPEC_V2=1\n"
"        export HCCL_BUFFSIZE=720\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=96\n"
"        export TASK_QUEUE_ENABLE=1\n"
"        export HCCL_SOCKET_IFNAME=xxx\n"
"        export GLOO_SOCKET_IFNAME=xxx\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode --host ${D_IP[$i]} \\\n"
"        --port 8001 --trust-remote-code --nnodes 1 --node-rank 0 --tp-size "
"16 --dp-size 16 \\\n"
"        --mem-fraction-static 0.8 --max-running-requests 384 --attention-"
"backend ascend --device npu --quantization modelslim \\\n"
"        --moe-a2a-backend deepep --enable-dp-attention --deepep-mode "
"low_latency --enable-dp-lm-head \\\n"
"        --cuda-graph-bs 8 10 12 14 16 18 20 22 24 --disaggregation-transfer-"
"backend ascend --watchdog-timeout 9000 --context-length 8192 \\\n"
"        --speculative-algorithm NEXTN --speculative-num-steps 3 --"
"speculative-eagle-topk 1 --speculative-num-draft-tokens 4  \\\n"
"        --prefill-round-robin-balance --disable-shared-experts-fusion --"
"dtype bfloat16 --tokenizer-worker-num 4 \\\n"
"\t\t    --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:741
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 384  --random-input-len 3500 --"
"random-output-len 1500 --num-prompts 1536 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:745
msgid "Deepseek V32 Low Latency 30ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:747
msgid "Model: Deepseek V3.2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:753
msgid "DataSets: 64K3K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:755
msgid "TPOT: 30ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:759
msgid "Deploy Prefill Instance"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:761
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export LD_LIBRARY_PATH=/usr/local/Ascend/ascend-toolkit/latest/opp/vendors/"
"customize/op_api/lib/:${LD_LIBRARY_PATH}\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export ASCEND_HOME_PATH=/usr/local/Ascend/ascend-toolkit/latest\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"\n"
"export HCCL_BUFFSIZE=1024\n"
"export DEEPEP_NORMAL_LONG_SEQ_ROUND=5\n"
"export DEEPEP_NORMAL_LONG_SEQ_PER_ROUND_TOKENS=512\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"export SGLANG_NPU_USE_MULTI_STREAM=1\n"
"export HCCL_OP_EXPANSION_MODE=AIV\n"
"\n"
"IPs=('your prefill ip1' 'your prefill ip2')\n"
"\n"
"# get IP in current node\n"
"LOCAL_HOST=`hostname -I|awk -F \" \" '{print$1}'`\n"
"echo \"LOCAL_HOST = \" ${LOCAL_HOST}\n"
"# get node index\n"
"for i in \"${!IPs[@]}\";\n"
"do\n"
"  echo \"LOCAL_HOST=${LOCAL_HOST}, IPs[${i}]=${IPs[$i]}\"\n"
"  if [ \"$LOCAL_HOST\" == \"${IPs[$i]}\" ]; then\n"
"      echo \"Node Rank : ${i}\"\n"
"      VC_TASK_INDEX=$i\n"
"      break\n"
"  fi\n"
"done\n"
"\n"
"IFNAMES=('xxx' 'xxx')\n"
"\n"
"export HCCL_SOCKET_IFNAME=${IFNAMES[$VC_TASK_INDEX]}\n"
"export GLOO_SOCKET_IFNAME=${HCCL_SOCKET_IFNAME}\n"
"echo \"HCCL_SOCKET_IFNAME : ${HCCL_SOCKET_IFNAME}\"\n"
"nnodes=${#IPs[@]}\n"
"tp_size=`expr 16 \\* ${nnodes}`\n"
"export ASCEND_MF_STORE_URL=tcp://${IPs[0]}:24667\n"
"\n"
"python3 -m sglang.launch_server --model-path ${MODEL_PATH} \\\n"
"--tp $tp_size \\\n"
"--trust-remote-code \\\n"
"--attention-backend ascend \\\n"
"--device npu \\\n"
"--watchdog-timeout 9000 \\\n"
"--host ${IPs[$VC_TASK_INDEX]} --port 8000 \\\n"
"--mem-fraction-static 0.73 \\\n"
"--disable-radix-cache --chunked-prefill-size -1 --max-prefill-tokens 68000 "
"\\\n"
"--max-running-requests 1 \\\n"
"--moe-a2a-backend deepep --deepep-mode normal \\\n"
"--quantization modelslim \\\n"
"--disaggregation-transfer-backend ascend \\\n"
"--disaggregation-mode prefill \\\n"
"--disable-cuda-graph \\\n"
"--nnodes $nnodes --node-rank $VC_TASK_INDEX \\\n"
"--disaggregation-bootstrap-port 8995 \\\n"
"--enable-nsa-prefill-context-parallel  --moe-dense-tp-size 1 \\\n"
"--speculative-algorithm NEXTN --speculative-num-steps 1 --speculative-eagle-"
"topk 1 --speculative-num-draft-tokens 2 \\\n"
"--dist-init-addr ${IPs[0]}:10000\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:842
msgid "Deploy Decode Instance"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:844
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"export LD_LIBRARY_PATH=/usr/local/Ascend/ascend-toolkit/latest/opp/vendors/"
"customize/op_api/lib/:${LD_LIBRARY_PATH}\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"export ASCEND_HOME_PATH=/usr/local/Ascend/ascend-toolkit/latest\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_NPU_USE_MULTI_STREAM=1\n"
"export SGLANG_NPU_USE_MLAPO=1\n"
"export HCCL_OP_EXPANSION_MODE=AIV\n"
"export SGLANG_SCHEDULER_SKIP_ALL_GATHER=1\n"
"export TASK_QUEUE_ENABLE=0\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"IPs=('your decode ip1' 'your decode ip2')\n"
"\n"
"export prefill_ip=your prefill ip1\n"
"# get IP in current node\n"
"LOCAL_HOST=`hostname -I|awk -F \" \" '{print$1}'`\n"
"echo \"LOCAL_HOST = \" ${LOCAL_HOST}\n"
"# get node index\n"
"for i in \"${!IPs[@]}\";\n"
"do\n"
"  echo \"LOCAL_HOST=${LOCAL_HOST}, IPs[${i}]=${IPs[$i]}\"\n"
"  if [ \"$LOCAL_HOST\" == \"${IPs[$i]}\" ]; then\n"
"      echo \"Node Rank : ${i}\"\n"
"      VC_TASK_INDEX=$i\n"
"      break\n"
"  fi\n"
"done\n"
"\n"
"IFNAMES=('xxx' 'xxx')\n"
"\n"
"export HCCL_SOCKET_IFNAME=${IFNAMES[$VC_TASK_INDEX]}\n"
"export GLOO_SOCKET_IFNAME=${HCCL_SOCKET_IFNAME}\n"
"nnodes=${#IPs[@]}\n"
"tp_size=`expr 16 \\* ${nnodes}`\n"
"export ASCEND_MF_STORE_URL=tcp://${prefill_ip}:24667\n"
"\n"
"CHUNKED_SIZE=65536\n"
"DP=8\n"
"export HCCL_BUFFSIZE=400\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=8\n"
"\n"
"python3 -m sglang.launch_server --model-path ${MODEL_PATH} \\\n"
"--tp $tp_size \\\n"
"--dp ${DP} \\\n"
"--ep $tp_size \\\n"
"--moe-dense-tp-size 1 \\\n"
"--enable-dp-attention \\\n"
"--enable-dp-lm-head \\\n"
"--trust-remote-code \\\n"
"--attention-backend ascend \\\n"
"--device npu \\\n"
"--watchdog-timeout 9000 \\\n"
"--host ${IPs[$VC_TASK_INDEX]} --port 8001 \\\n"
"--mem-fraction-static 0.79 \\\n"
"--disable-radix-cache \\\n"
"--chunked-prefill-size -1 --max-prefill-tokens 68000 \\\n"
"--max-running-requests 32 \\\n"
"--cuda-graph-max-bs 4 \\\n"
"--moe-a2a-backend deepep \\\n"
"--deepep-mode low_latency \\\n"
"--quantization modelslim \\\n"
"--speculative-algorithm NEXTN --speculative-num-steps 3 --speculative-eagle-"
"topk 1 --speculative-num-draft-tokens 4 \\\n"
"--disaggregation-transfer-backend ascend \\\n"
"--disaggregation-mode decode \\\n"
"--prefill-round-robin-balance \\\n"
"--load-balance-method round_robin \\\n"
"--nnodes $nnodes --node-rank $VC_TASK_INDEX \\\n"
"--dist-init-addr ${IPs[0]}:10000 --load-balance-method decode_round_robin\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:934
msgid ""
"export SGLANG_DP_ROUND_ROBIN=1\n"
"python -m sglang_router.launch_router \\\n"
"    --pd-disaggregation \\\n"
"    --policy cache_aware \\\n"
"    --prefill http://PIP1:8000 8998 \\\n"
"    --prefill http://PIP2:8000 8999 \\\n"
"    --decode http://DIP1:8001 \\\n"
"    --host 127.0.0.1 \\\n"
"    --port 6688 \\\n"
"    --mini-lb\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:949
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 6688 --max-concurrency 32  --random-input-len 64000 --"
"random-output-len 3000 --num-prompts 64 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:953
msgid "Qwen3 235B High Throughput 50ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:955
#: ../../../platforms/ascend_npu_best_practice.md:1087
#: ../../../platforms/ascend_npu_best_practice.md:1156
#: ../../../platforms/ascend_npu_best_practice.md:1224
#: ../../../platforms/ascend_npu_best_practice.md:1292
#: ../../../platforms/ascend_npu_best_practice.md:1373
msgid "Model: Qwen3 235B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:957
#: ../../../platforms/ascend_npu_best_practice.md:1846
msgid "Hardware: Atlas 800I A3 24Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:967
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=16\n"
"\n"
"MODEL_PATH=xxx\n"
"export ASCEND_MF_STORE_URL=\"tcp://your prefill ip1:24667\"\n"
"P_IP=('your prefill ip1')\n"
"D_IP=('your decode ip1' 'your decode ip2')\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export SGLANG_DP_ROUND_ROBIN=1\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"        source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"        export DEEPEP_NORMAL_LONG_SEQ_PER_ROUND_TOKENS=1024\n"
"        export DEEPEP_NORMAL_LONG_SEQ_ROUND=16\n"
"        export HCCL_BUFFSIZE=4300\n"
"        export TASK_QUEUE_ENABLE=2\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        export STREAMS_PER_DEVICE=32\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"\n"
"        # P\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode prefill \\\n"
"        --host ${P_IP[$i]} --port 8000 --disaggregation-bootstrap-port 8995 "
"--trust-remote-code \\\n"
"        --nnodes 1 --node-rank $i --tp-size 16 --dp-size 16 --mem-fraction-"
"static 0.6 \\\n"
"        --disable-radix-cache \\\n"
"        --attention-backend ascend --device npu --quantization modelslim --"
"disaggregation-transfer-backend ascend \\\n"
"        --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx "
"\\\n"
"        --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-"
"num-draft-tokens 4 \\\n"
"        --speculative-draft-model-quantization unquant \\\n"
"        --max-running-requests 128 --chunked-prefill-size 262144 --max-"
"prefill-tokens 262144 \\\n"
"        --enable-dp-attention  \\\n"
"        --moe-a2a-backend deepep --deepep-mode normal --dtype bfloat16\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"        source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=24\n"
"        export HCCL_BUFFSIZE=512\n"
"        export HCCL_SOCKET_IFNAME=data0.3001\n"
"        export GLOO_SOCKET_IFNAME=data0.3001\n"
"        export STREAMS_PER_DEVICE=32\n"
"\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode \\\n"
"        --host ${D_IP[$i]} --port 8001 --trust-remote-code \\\n"
"        --nnodes 2 --node-rank $i --tp-size 32 --dp-size 32 --mem-fraction-"
"static 0.83 --max-running-requests 768 \\\n"
"        --attention-backend ascend --device npu --quantization modelslim --"
"enable-dp-attention \\\n"
"        --moe-a2a-backend ascend_fuseep --cuda-graph-bs 6 8 12 15 18 20 22 "
"24 \\\n"
"        --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx "
"\\\n"
"        --speculative-draft-model-quantization unquant \\\n"
"        --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-"
"num-draft-tokens 4 \\\n"
"        --dist-init-addr xxx:5000 \\\n"
"        --disaggregation-transfer-backend ascend --watchdog-timeout 9000 --"
"context-length 8192 \\\n"
"        --prefill-round-robin-balance --enable-dp-lm-head --dtype bfloat16 --"
"tokenizer-worker-num 4 \\\n"
"        --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1067
#: ../../../platforms/ascend_npu_best_practice.md:1944
msgid ""
"export SGLANG_DP_ROUND_ROBIN=1\n"
"python -m sglang_router.launch_router \\\n"
"    --pd-disaggregation \\\n"
"    --policy cache_aware \\\n"
"    --prefill http://PIP:8000 8995 \\\n"
"    --decode http://DIP:8001 \\\n"
"    --host 127.0.0.1 \\\n"
"    --port 6688 \\\n"
"    --mini-lb\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1081
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang-oai --"
"host 127.0.0.1 --port 7239 --max-concurrency 860 --random-input-len 3500 --"
"random-output-len 1500 --num-prompts 3440 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1085
msgid "Qwen3 235B High Throughput 50ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1099
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=1600\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export SGLANG_SCHEDULER_DECREASE_PREFILL_IDLE=2\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu --quantization modelslim  \\\n"
"    --max-running-requests 272 --context-length 8192 --dtype bfloat16 \\\n"
"    --chunked-prefill-size 32768 --max-prefill-tokens 32768 \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --disable-radix-cache --moe-a2a-backend deepep  --deepep-mode auto --"
"speculative-draft-model-quantization unquant \\\n"
"    --tp 16 --dp-size 16 --enable-dp-attention --enable-dp-lm-head --mem-"
"fraction-static 0.8 --cuda-graph-bs 3 4 6 8 10 12 13 14 15 16 17\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1150
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 272 --random-input-len 3500 --random-"
"output-len 1500 --num-prompts 1088 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1154
msgid "Qwen3-235B Atlas 800I A3-8Card PD Mixed 2K-2K 100ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1164
msgid "TPOT: 100ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1168
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=1200\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu --quantization modelslim  \\\n"
"    --max-running-requests 576 --context-length 8192 --dtype bfloat16 \\\n"
"    --chunked-prefill-size 32768 --max-prefill-tokens 458880  \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --disable-radix-cache --moe-a2a-backend deepep  --deepep-mode auto --"
"speculative-draft-model-quantization unquant  \\\n"
"    --tp 16 --dp-size 16 --enable-dp-attention --enable-dp-lm-head --mem-"
"fraction-static 0.81 --cuda-graph-bs 8 16 20 24 32 36\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1218
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 576 --random-input-len 2000 --random-"
"output-len 2000 --num-prompts 576 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1222
msgid "Qwen3 235B High Throughput 50ms 3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1236
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=2100\n"
"export HCCL_SOCKET_IFNAME=xxx\n"
"export GLOO_SOCKET_IFNAME=xxx\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu --quantization modelslim  \\\n"
"    --max-running-requests 480 --context-length 8192 --dtype bfloat16 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 4096 --speculative-draft-"
"model-quantization unquant  \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --disable-radix-cache --moe-a2a-backend deepep  --deepep-mode auto  \\\n"
"    --tp 16 --dp-size 16 --enable-dp-attention --enable-dp-lm-head --mem-"
"fraction-static 0.75 --cuda-graph-bs 6 8 10 12 15 18 28 30\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1286
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 480 --random-input-len 2048 --random-"
"output-len 2048 --num-prompts 480 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1290
msgid "Qwen3 235B High Throughput 50ms 4"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1304
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=1600\n"
"export HCCL_SOCKET_IFNAME=xxx\n"
"export GLOO_SOCKET_IFNAME=xxx\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"\n"
"MIX_IP=('IP1' 'IP2')\n"
"\n"
"for i in \"${!MIX_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${MIX_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${MIX_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${MIX_IP[$i]}\"\n"
"        export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"        export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} \\\n"
"        --host 127.0.0.1 --port 7439 --trust-remote-code \\\n"
"        --nnodes 2 --node-rank $i --tp-size 32 --dp-size 32 --mem-fraction-"
"static 0.8 --max-running-requests 768 \\\n"
"        --attention-backend ascend --device npu --quantization modelslim --"
"enable-dp-attention \\\n"
"        --moe-a2a-backend deepep --deepep-mode auto --cuda-graph-bs 6 8 10 "
"12 18 24 \\\n"
"        --dist-init-addr ${MIX_IP[0]}:5000 --chunked-prefill-size 131072 --"
"max-prefill-tokens 458880 \\\n"
"        --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx --"
"speculative-draft-model-quantization= unquant \\\n"
"        --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-"
"num-draft-tokens 4 \\\n"
"        --context-length 8192 --disable-radix-cache \\\n"
"        --enable-dp-lm-head --dtype bfloat16\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1367
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 768 --random-input-len 2000 --random-"
"output-len 2000 --num-prompts 768 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1371
msgid "Qwen3 235B Low Latency 10ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1379
msgid "DataSets: 11K1K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1381
msgid "TPOT: 10ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1385
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=1600\n"
"export HCCL_SOCKET_IFNAME=xxx\n"
"export GLOO_SOCKET_IFNAME=xxx\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu --quantization modelslim  \\\n"
"    --max-running-requests 1  --dtype bfloat16 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 16384 --speculative-draft-"
"model-quantization unquant  \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --disable-radix-cache --enable-dp-lm-head \\\n"
"    --tp 16 --mem-fraction-static 0.78 --cuda-graph-bs 1\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1436
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 1 --random-input-len 11000 --random-"
"output-len 1000 --num-prompts 1 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1440
msgid "Qwen3 32B Low Latency 18ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1442
#: ../../../platforms/ascend_npu_best_practice.md:1511
#: ../../../platforms/ascend_npu_best_practice.md:1577
#: ../../../platforms/ascend_npu_best_practice.md:1642
#: ../../../platforms/ascend_npu_best_practice.md:1710
#: ../../../platforms/ascend_npu_best_practice.md:2172
#: ../../../platforms/ascend_npu_best_practice.md:2239
#: ../../../platforms/ascend_npu_best_practice.md:2308
#: ../../../platforms/ascend_npu_best_practice.md:2376
msgid "Model: Qwen3 32B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1444
#: ../../../platforms/ascend_npu_best_practice.md:1513
msgid "Hardware: Atlas 800I A3 4Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1448
#: ../../../platforms/ascend_npu_best_practice.md:2178
msgid "DataSets: 6K1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1450
#: ../../../platforms/ascend_npu_best_practice.md:2180
msgid "TPOT: 18ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1454
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=xxx\n"
"export GLOO_SOCKET_IFNAME=xxx\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu \\\n"
"    --max-running-requests 32 \\\n"
"    --disable-radix-cache \\\n"
"    --chunked-prefill-size 24576 --max-prefill-tokens 65536 \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --tp-size 8 --mem-fraction-static 0.72 --cuda-graph-bs 8 16 24 32  --"
"dtype bfloat16\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1503
#: ../../../platforms/ascend_npu_best_practice.md:1702
#: ../../../platforms/ascend_npu_best_practice.md:1770
#: ../../../platforms/ascend_npu_best_practice.md:2231
#: ../../../platforms/ascend_npu_best_practice.md:2368
#: ../../../platforms/ascend_npu_best_practice.md:2436
msgid "We tested it based on the GSM8K dataset."
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1505
#: ../../../platforms/ascend_npu_best_practice.md:2233
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7439 --max-concurrency 32 --random-output-len 1500 --"
"random-input-len 6000 --num-prompts 32 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1509
msgid "Qwen3 32B Low Latency 11ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1517
#: ../../../platforms/ascend_npu_best_practice.md:2245
msgid "DataSets: 4K1.5K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1519
#: ../../../platforms/ascend_npu_best_practice.md:2247
msgid "TPOT: 11ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1523
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7339 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu   \\\n"
"    --max-running-requests 1 \\\n"
"    --disable-radix-cache \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --chunked-prefill-size 24576 --max-prefill-tokens 65536  \\\n"
"    --tp-size 8 --mem-fraction-static 0.72 --cuda-graph-bs 1 --dtype "
"bfloat16\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1571
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7239 --random-range-ratio 1 --max-concurrency 1 --"
"random-output-len 1500 --random-input-len 4096 --num-prompts 4\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1575
msgid "Qwen3 32B Low Latency 12ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1583
msgid "DataSets: 18K4K"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1585
msgid "TPOT: 12ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1589
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7339 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu   \\\n"
"    --max-running-requests 1 \\\n"
"    --disable-radix-cache --speculative-draft-model-quantization unquant \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 65536  \\\n"
"    --tp-size 16 --mem-fraction-static 0.72 --cuda-graph-bs 1 --dtype "
"bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1636
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7339 --random-range-ratio 1 --max-concurrency 1 --"
"random-output-len 18000 --random-input-len 4000 --num-prompts 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1640
msgid "Qwen3 32B High Throughput 50ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1644
#: ../../../platforms/ascend_npu_best_practice.md:1712
#: ../../../platforms/ascend_npu_best_practice.md:2109
msgid "Hardware: Atlas 800I A3 2Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1654
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7239 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 78 \\\n"
"    --disable-radix-cache --speculative-draft-model-quantization unquant \\\n"
"    --chunked-prefill-size 65536 --max-prefill-tokens 65536  \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --tp-size 4  --mem-fraction-static 0.7 --cuda-graph-bs 16 32 64 68 72 78 "
"--dtype bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1704
#: ../../../platforms/ascend_npu_best_practice.md:2370
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7239 --max-concurrency 78 --random-output-len 1500 --"
"random-input-len 3500 --num-prompts 312 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1708
msgid "Qwen3 32B High Throughput 50ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1722
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7239 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 120 \\\n"
"    --disable-radix-cache --speculative-draft-model-quantization unquant \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 49152 \\\n"
"    --tp-size 4 --mem-fraction-static 0.7 --cuda-graph-bs 54 60 66 72 78 84 "
"90 108 114 120 --dtype bfloat16\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1772
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7239 --max-concurrency 120 --random-output-len 2000 --"
"random-input-len 2000 --num-prompts 480 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1776
msgid "Qwen3 32B High Throughput 50ms 3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1778
msgid "Model: Qwen3 30B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1780
msgid "Hardware: Atlas 800I A3 1Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1790
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export DISABLE_EAGLE3_QUANT=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7239 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 192 \\\n"
"    --disable-radix-cache \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 32768 \\\n"
"    --tp-size 2 --mem-fraction-static 0.86 --cuda-graph-bs 42 88 96 132 144 "
"156 172 178 192 --dtype bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1838
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7239 --max-concurrency 156 --random-input-len 3500 --random-"
"output-len 1500 --num-prompts 624 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1842
msgid "Qwen3 480B High Throughput 50ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1844
#: ../../../platforms/ascend_npu_best_practice.md:1964
#: ../../../platforms/ascend_npu_best_practice.md:2043
msgid "Model: Qwen3 480B"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1856
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=16\n"
"\n"
"MODEL_PATH=xxx\n"
"export ASCEND_MF_STORE_URL=\"tcp://PIP:24667\"\n"
"P_IP=('PIP')\n"
"D_IP=('DIP1' 'DIP2')\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"\n"
"for i in \"${!P_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${P_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${P_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${P_IP[$i]}\"\n"
"        source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"        source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"        export DEEPEP_NORMAL_LONG_SEQ_PER_ROUND_TOKENS=1024\n"
"        export DEEPEP_NORMAL_LONG_SEQ_ROUND=16\n"
"        export HCCL_BUFFSIZE=4300\n"
"        export TASK_QUEUE_ENABLE=2\n"
"        export HCCL_SOCKET_IFNAME=lo\n"
"        export GLOO_SOCKET_IFNAME=lo\n"
"        export STREAMS_PER_DEVICE=32\n"
"        export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode prefill \\\n"
"        --host ${P_IP[$i]} --port 8000 --disaggregation-bootstrap-port 8995 "
"--trust-remote-code \\\n"
"        --nnodes 1 --node-rank $i --tp-size 16 --dp-size 2 --mem-fraction-"
"static 0.6 \\\n"
"        --disable-radix-cache \\\n"
"\t      --attention-backend ascend --device npu --quantization modelslim --"
"disaggregation-transfer-backend ascend \\\n"
"\t      --max-running-requests 128 --chunked-prefill-size 65536 --max-"
"prefill-tokens 262144 \\\n"
"        --enable-dp-attention  \\\n"
"        --moe-a2a-backend deepep --deepep-mode normal --dtype bfloat16\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
"for i in \"${!D_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${D_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${D_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${D_IP[$i]}\"\n"
"        source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"        source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"        export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=72\n"
"        export HCCL_BUFFSIZE=512\n"
"        export HCCL_SOCKET_IFNAME=xxx\n"
"        export GLOO_SOCKET_IFNAME=xxx\n"
"        export STREAMS_PER_DEVICE=32\n"
"\n"
"        python -m sglang.launch_server --model-path ${MODEL_PATH} --"
"disaggregation-mode decode \\\n"
"        --host ${D_IP[$i]} --port 8001 --trust-remote-code \\\n"
"        --nnodes 2 --node-rank $i --tp-size 32 --dp-size 4 --mem-fraction-"
"static 0.73 --max-running-requests 384 \\\n"
"        --attention-backend ascend --device npu --quantization modelslim --"
"enable-dp-attention \\\n"
"        --moe-a2a-backend ascend_fuseep --cuda-graph-bs 16 32 48 56 64 72 80 "
"88 96 \\\n"
"        --dist-init-addr DIP1:5000 \\\n"
"\t      --disaggregation-transfer-backend ascend --watchdog-timeout 9000 --"
"context-length 8192 \\\n"
"        --prefill-round-robin-balance --enable-dp-lm-head --dtype bfloat16 --"
"tokenizer-worker-num 4 --load-balance-method decode_round_robin\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
"\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1958
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7239 --max-concurrency 410 --random-input-len 3500 --random-"
"output-len 1500 --num-prompts 1640 --random-range-ratio 1 --request-rate 8\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1962
msgid "Qwen3 480B High Throughput 50ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:1976
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=16\n"
"\n"
"export DEEP_NORMAL_MODE_USE_INT8_QUANT=1\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=1800\n"
"export HCCL_SOCKET_IFNAME=xxx\n"
"export GLOO_SOCKET_IFNAME=xxx\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"\n"
"MIX_IP=('IP1' 'IP2')\n"
"\n"
"for i in \"${!MIX_IP[@]}\";\n"
"do\n"
"    if [[ \"$LOCAL_HOST1\" == \"${MIX_IP[$i]}\" || \"$LOCAL_HOST2\" == "
"\"${MIX_IP[$i]}\" ]];\n"
"    then\n"
"        echo \"${MIX_IP[$i]}\"\n"
"\n"
"        python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"        --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 2 --node-"
"rank $i  \\\n"
"        --dist-init-addr 141.61.133.128:5000 \\\n"
"        --attention-backend ascend --device npu --quantization modelslim  "
"\\\n"
"        --max-running-requests 288 --context-length 8192 --dtype bfloat16  "
"\\\n"
"        --chunked-prefill-size 114688 --max-prefill-tokens 458880  \\\n"
"        --disable-radix-cache --moe-a2a-backend deepep  --deepep-mode auto  "
"\\\n"
"        --tp 32 --dp-size 4 --enable-dp-attention --enable-dp-lm-head --mem-"
"fraction-static 0.7 --cuda-graph-bs 56 64 72\n"
"        NODE_RANK=$i\n"
"        break\n"
"    fi\n"
"done\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2037
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 288 --random-input-len 3500 --random-"
"output-len 1500 --num-prompts 1152 --random-range-ratio 1 --request-rate 20\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2041
msgid "Qwen3 480B High Throughput 50ms 3"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2055
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=2100\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"--host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank 0  "
"\\\n"
"--attention-backend ascend --device npu --quantization modelslim  \\\n"
"--max-running-requests 80 --context-length 8192 --dtype bfloat16 \\\n"
"--chunked-prefill-size 28672 --max-prefill-tokens 458880  \\\n"
"--disable-radix-cache --moe-a2a-backend deepep  --deepep-mode auto --enable-"
"dp-attention --enable-dp-lm-head \\\n"
"--tp 16 --dp-size 4 --mem-fraction-static 0.7 --cuda-graph-bs  16 20 24\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2101
msgid ""
"python -m sglang.bench_serving --dataset-name random --backend sglang --host "
"127.0.0.1 --port 7439 --max-concurrency 80 --random-input-len 3500 --random-"
"output-len 1500 --num-prompts 320 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2105
msgid "Qwen3 Next High Throughput 50ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2107
msgid "Model: Qwen3 Next"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2119
msgid ""
"export cann_path=/usr/local/Ascend/ascend-toolkit/latest\n"
"source /usr/local/Ascend/driver/bin/setenv.bash\n"
"source ${cann_path}/../set_env.sh\n"
"source ${cann_path}/../../nnal/atb/set_env.sh\n"
"source ${cann_path}/opp/vendors/customize/bin/set_env.bash\n"
"export ASCEND_HOME_PATH=${cann_path}\n"
"source /usr/local/Ascend/8.5.0/bisheng_toolkit/set_env.sh\n"
"\n"
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"export STREAMS_PER_DEVICE=32\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"\n"
"export HCCL_OP_EXPANSION_MODE=AIV\n"
"export HCCL_ALGO=\"level0:NA;level1:ring\"\n"
"\n"
"export SGLANG_DEEPEP_NUM_MAX_DISPATCH_TOKENS_PER_RANK=20\n"
"export HCCL_BUFFSIZE=2000\n"
"\n"
"python -m sglang.launch_server \\\n"
"        --model-path /mnt/share/weight/Qwen3-Next-80B-A3B-Instruct-W8A8-3 "
"\\\n"
"        --host 127.0.0.1 \\\n"
"        --port 6699 \\\n"
"        --tp-size 4 \\\n"
"        --device npu \\\n"
"        --attention-backend ascend \\\n"
"        --mem-fraction-static 0.685 \\\n"
"        --max-running-requests 80 \\\n"
"        --watchdog-timeout 3600 \\\n"
"        --disable-radix-cache \\\n"
"        --cuda-graph-bs 80 \\\n"
"        --max-prefill-tokens 28672  --max-total-tokens 450560 \\\n"
"        --moe-a2a-backend deepep --deepep-mode auto \\\n"
"        --quantization modelslim \\\n"
"        --chunked-prefill-size -1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2166
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 6699 --max-concurrency 80 --random-output-len 1536 --"
"random-input-len 3584 --num-prompts 160 --random-range-ratio 1\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2170
msgid "Qwen3 32B A2 Low Latency 18ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2174
#: ../../../platforms/ascend_npu_best_practice.md:2241
#: ../../../platforms/ascend_npu_best_practice.md:2310
#: ../../../platforms/ascend_npu_best_practice.md:2378
msgid "Hardware: Atlas 800I A2 8Card"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2184
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7439 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 32 \\\n"
"    --disable-radix-cache \\\n"
"    --chunked-prefill-size 24576 --max-prefill-tokens 65536 \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --tp-size 8 --mem-fraction-static 0.72 --cuda-graph-bs 8 16 24 32 --"
"dtype bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2237
msgid "Qwen3 32B A2 Low Latency 11ms"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2251
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export DISABLE_EAGLE3_QUANT=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7339 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu   \\\n"
"    --max-running-requests 32 \\\n"
"    --disable-radix-cache \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx  \\\n"
"    --speculative-num-steps 4 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 5 \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 65536  \\\n"
"    --tp-size 8 --mem-fraction-static 0.72 --cuda-graph-bs 1 4 6 12 18 24 30 "
"32 --dtype bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2302
msgid ""
"python3 -m sglang.bench_serving  --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7339 --random-range-ratio 1 --max-concurrency 1 --"
"random-output-len 1500 --random-input-len 4096 --num-prompts 4\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2306
msgid "Qwen3 32B A2 High Throughput 50ms 1"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2320
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7239 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 78 \\\n"
"    --disable-radix-cache --speculative-draft-model-quantization unquant \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 65536  \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 \\\n"
"    --tp-size 4  --mem-fraction-static 0.72 --cuda-graph-bs 1 4 8 16 32 64 "
"68 72 78 --dtype bfloat16 --base-gpu-id 4\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2374
msgid "Qwen3 32B A2 High Throughput 50ms 2"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2388
msgid ""
"echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/"
"scaling_governor\n"
"sysctl -w vm.swappiness=0\n"
"sysctl -w kernel.numa_balancing=0\n"
"sysctl -w kernel.sched_migration_cost_ns=50000\n"
"\n"
"export SGLANG_SET_CPU_AFFINITY=1\n"
"unset https_proxy\n"
"unset http_proxy\n"
"unset HTTPS_PROXY\n"
"unset HTTP_PROXY\n"
"unset ASCEND_LAUNCH_BLOCKING\n"
"source /usr/local/Ascend/ascend-toolkit/set_env.sh\n"
"source /usr/local/Ascend/nnal/atb/set_env.sh\n"
"source /usr/local/Ascend/ascend-toolkit/latest/opp/vendors/customize/bin/"
"set_env.bash\n"
"export PATH=/usr/local/Ascend/8.5.0/compiler/bishengir/bin:$PATH\n"
"\n"
"MODEL_PATH=xxx\n"
"\n"
"export SGLANG_DISAGGREGATION_BOOTSTRAP_TIMEOUT=600\n"
"\n"
"LOCAL_HOST1=`hostname -I|awk -F \" \" '{print$1}'`\n"
"LOCAL_HOST2=`hostname -I|awk -F \" \" '{print$2}'`\n"
"\n"
"echo \"${LOCAL_HOST1}\"\n"
"echo \"${LOCAL_HOST2}\"\n"
"\n"
"export HCCL_BUFFSIZE=400\n"
"export HCCL_SOCKET_IFNAME=lo\n"
"export GLOO_SOCKET_IFNAME=lo\n"
"export HCCL_OP_EXPANSION_MODE=\"AIV\"\n"
"export SGLANG_ENABLE_OVERLAP_PLAN_STREAM=1\n"
"export SGLANG_ENABLE_SPEC_V2=1\n"
"export DISABLE_EAGLE3_QUANT=1\n"
"\n"
"python -m sglang.launch_server --model-path $MODEL_PATH \\\n"
"    --host 127.0.0.1 --port 7239 --trust-remote-code --nnodes 1 --node-rank "
"0  \\\n"
"    --attention-backend ascend --device npu  --quantization modelslim  \\\n"
"    --max-running-requests 120 \\\n"
"    --disable-radix-cache \\\n"
"    --speculative-algorithm EAGLE3 --speculative-draft-model-path xxx \\\n"
"    --speculative-num-steps 3 --speculative-eagle-topk 1 --speculative-num-"
"draft-tokens 4 --speculative-draft-model-quantization unquant \\\n"
"    --chunked-prefill-size -1 --max-prefill-tokens 49152 --base-gpu-id 4 \\\n"
"    --tp-size 4 --mem-fraction-static 0.7 --cuda-graph-bs 54 60 66 72 78 84 "
"90 108 114 120 --dtype bfloat16\n"
msgstr ""

#: ../../../platforms/ascend_npu_best_practice.md:2438
msgid ""
"python3 -m sglang.bench_serving --dataset-name random --backend sglang --"
"host 127.0.0.1 --port 7239 --max-concurrency 120 --random-output-len 2000 --"
"random-input-len 2000 --num-prompts 120 --random-range-ratio 1\n"
msgstr ""
